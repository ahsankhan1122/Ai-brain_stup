{% extends "base.html" %}

{% block content %}
<div class="dashboard">
    <div class="header">
        <h2>ðŸ“Š Trading Dashboard</h2>
        <p>Real-time cryptocurrency trading signals and performance</p>
    </div>

    {% if error %}
    <div class="error">
        <p>{{ error }}</p>
    </div>
    {% else %}
    <div class="stats-grid">
        <div class="stat-card">
            <h3>ðŸ’° Balance</h3>
            <p class="stat-value">${{ "%.2f"|format(balance) }}</p>
        </div>
        
        <div class="stat-card">
    <h3>ðŸ“ˆ Market Condition</h3>
    {% if market_condition %}
        <p class="stat-value">{{ market_condition.condition }}</p>
        <p class="stat-detail">{{ "%.1f"|format(market_condition.confidence * 100) }}% confidence</p>
    {% else %}
        <p class="stat-value">N/A</p>
        <p class="stat-detail">No data available</p>
    {% endif %}
</div>

        
        <div class="stat-card">
            <h3>ðŸ“¶ Signals</h3>
            <p class="stat-value">{{ signals|length }}</p>
            <p class="stat-detail">active signals</p>
        </div>
        
        <div class="stat-card">
            <h3>ðŸ“Š Positions</h3>
            <p class="stat-value">{{ positions|length }}</p>
            <p class="stat-detail">open positions</p>
        </div>
    </div>

    <div class="content-grid">
        <div class="card">
            <h3>Latest Signals</h3>
            {% if signals %}
            <div class="signals-list">
                {% for signal in signals %}
                <div class="signal-item {{ signal.action|lower }}">
                    <span class="signal-action">{{ signal.action }}</span>
                    <span class="signal-confidence">{{ "%.1f"|format(signal.confidence * 100) }}%</span>
                    <p class="signal-reason">{{ signal.reason }}</p>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>No signals available at the moment.</p>
            {% endif %}
        </div>

        <div class="card">
            <h3>Strategy Performance</h3>
            {% if performance %}
            <div class="performance-list">
                {% for strategy, stats in performance.items() %}
                <div class="performance-item">
                    <h4>{{ strategy }}</h4>
                    <div class="performance-stats">
                        <span>Avg: ${{ "%.2f"|format(stats.avg_profit) }}</span>
                        <span>Win: {{ "%.1f"|format(stats.win_rate * 100) }}%</span>
                        <span>Trades: {{ stats.total_trades }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>No performance data available yet.</p>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
